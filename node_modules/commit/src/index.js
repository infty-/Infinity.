var Emitter = require('eventemitter2').EventEmitter2;
var help = require('help');
help.global.globalize();
globalize(help.propConstr);
globalize(help.func, Function.prototype);
globalize(help.Func, Function);

module.exports = Function.create(function () {
    Emitter.call(this, {
	wildcard: true,
	newListener: true
    });
}, Object.prototype, {
    prototype: Member(Object.create(Emitter.prototype, function () {
	commit: Meth(function (obj, props) {
	    emitter.emit([]);
	}),
	commitObj: Meth(function (obj) {
	    emitter.emit([obj]);
	}),
	commitProp: Meth(function (obj, prop) {
	    emitter.emit([obj, prop, '*']);
	})
    }))
});

emitter.emit();